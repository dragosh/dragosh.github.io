{"version":3,"sources":["webpack:///widget-render-pusher/webpack/universalModuleDefinition","webpack:///widget-render-pusher/widget-render-pusher.js","webpack:///widget-render-pusher/webpack/bootstrap ebb43203607556e893c5","webpack:///widget-render-pusher/./index.js","webpack:///widget-render-pusher/./scripts/bucket.js","webpack:///widget-render-pusher/./scripts/webcam.js"],"names":[],"mappings":"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","file":"widget-render-pusher.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-render-pusher\"] = factory();\n\telse\n\t\troot[\"widget-render-pusher\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-render-pusher\"] = factory();\n\telse\n\t\troot[\"widget-render-pusher\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * ------------------------------------------------------------------------\n\t * Widget RenderConf Pusher\n\t * ------------------------------------------------------------------------\n\t */\n\t'use strict';\n\n\tvar _bucket = __webpack_require__(2);\n\n\tvar _bucket2 = _interopRequireDefault(_bucket);\n\n\tvar _webcam = __webpack_require__(3);\n\n\tvar _webcam2 = _interopRequireDefault(_webcam);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar pusher = new Pusher('087e104eb546157304a9', { cluster: 'eu' });\n\tvar button = pusher.subscribe('button');\n\n\tvar shutter = document.getElementById('shutter');\n\tvar sound = document.getElementById('sound');\n\tvar gallery = document.getElementById('gallery');\n\n\t// const test = document.getElementById('test');\n\t// test.addEventListener('click', function() {\n\t//     var data = {\n\t//         id: bucket.makeid()\n\t//     };\n\t//     take_snapshot(data);\n\t// }, false)\n\n\tfunction take_snapshot(data) {\n\t    console.log(data, 'Button data');\n\t    shutter.setAttribute('class', 'on');\n\t    sound.play();\n\t    setTimeout(function () {\n\t        shutter.setAttribute('class', '');\n\t    }, 30 * 2 + 45); /* Shutter speed (double & add 45) */\n\t    // take snapshot and get image data\n\t    _webcam2.default.snap(function (data_uri) {\n\t        _bucket2.default.put(data.id, data_uri).then(function () {\n\t            refresh(data.id);\n\t        });\n\t    });\n\t}\n\n\tfunction refresh(id) {\n\t    console.log('list', id);\n\t    _bucket2.default.list(id).then(function (data) {\n\t        return Promise.all(data.map(function (uri) {\n\t            return window.fetch(uri).then(function (response) {\n\t                return response.text();\n\t            });\n\t        }));\n\t    }).then(function (images) {\n\t        return images.map(function (uri) {\n\t            var i = document.createElement('img');\n\t            i.setAttribute('src', uri);\n\t            i.setAttribute('width', 320);\n\t            i.setAttribute('height', 240);\n\t            i.setAttribute('class', 'pic');\n\t            return i;\n\t        });\n\t    }).then(function (images) {\n\t        var first = gallery.childNodes[0];\n\t        var group = document.createElement('hr');\n\t        if (first) {\n\t            gallery.insertBefore(group, first);\n\t        } else {\n\t            gallery.appendChild(group);\n\t        }\n\t        images.forEach(function (i) {\n\t            console.log(gallery);\n\t            console.log(i);\n\t            console.log(group);\n\t            gallery.insertBefore(i, group);\n\t            // document.body.appendChild(i)\n\t        });\n\t    }).catch(function (err) {\n\t        console.log(err);\n\t    });\n\t}\n\n\tbutton.bind('press', function (data) {\n\t    take_snapshot(data);\n\t});\n\n\t_webcam2.default.set({\n\t    width: 320,\n\t    height: 240,\n\t    image_format: 'jpeg',\n\t    jpeg_quality: 90\n\t});\n\t_webcam2.default.attach('#my_camera');\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tAWS.config.region = 'eu-west-1';\n\n\tvar s3 = new AWS.S3();\n\n\tfunction unauthenticatedRequest(operation, params, callback) {\n\t    var request = s3[operation](params);\n\t    request.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n\t    request.removeListener('sign', AWS.EventListeners.Core.SIGN);\n\t    return request.send(callback);\n\t}\n\n\tfunction makeid() {\n\t    var text = '';\n\t    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n\t    for (var i = 0; i < 5; i++) {\n\t        text += possible.charAt(Math.floor(Math.random() * possible.length));\n\t    }return text;\n\t}\n\n\tvar put = function put(id, data) {\n\t    var params = {\n\t        Bucket: 'backbase-renderconf',\n\t        Key: id + '/' + makeid(),\n\t        ACL: 'public-read',\n\t        Body: data\n\t    };\n\t    return new Promise(function (resolve, reject) {\n\t        unauthenticatedRequest('putObject', params, function (err, data) {\n\t            if (err) reject(err);else resolve(data); // successful response\n\t        });\n\t    });\n\t};\n\n\tvar list = function list(id) {\n\t    var params = {\n\t        Bucket: 'backbase-renderconf',\n\t        Prefix: id + '/'\n\t    };\n\n\t    return new Promise(function (resolve, reject) {\n\t        unauthenticatedRequest('listObjects', params, function (err, data) {\n\t            if (err) {\n\t                reject(err);\n\t            }\n\t            var results = data.Contents.map(function (item) {\n\t                return 'https://s3-eu-west-1.amazonaws.com/backbase-renderconf/' + item.Key;\n\t            });\n\t            resolve(results);\n\t        });\n\t    });\n\t};\n\n\tmodule.exports = {\n\t    put: put,\n\t    list: list,\n\t    makeid: makeid\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\t/* eslint-disable */\n\t// WebcamJS v1.0.6\n\t// Webcam library for capturing JPEG/PNG images in JavaScript\n\t// Attempts getUserMedia, falls back to Flash\n\t// Author: Joseph Huckaby: http://github.com/jhuckaby\n\t// Based on JPEGCam: http://code.google.com/p/jpegcam/\n\t// Copyright (c) 2012 - 2015 Joseph Huckaby\n\t// Licensed under the MIT License\n\n\t(function (window) {\n\n\t    var Webcam = {\n\t        version: '1.0.6',\n\n\t        // globals\n\t        protocol: location.protocol.match(/https/i) ? 'https' : 'http',\n\t        swfURL: '', // URI to webcam.swf movie (defaults to the js location)\n\t        loaded: false, // true when webcam movie finishes loading\n\t        live: false, // true when webcam is initialized and ready to snap\n\t        userMedia: true, // true when getUserMedia is supported natively\n\n\t        params: {\n\t            width: 0,\n\t            height: 0,\n\t            dest_width: 0, // size of captured image\n\t            dest_height: 0, // these default to width/height\n\t            image_format: 'jpeg', // image format (may be jpeg or png)\n\t            jpeg_quality: 90, // jpeg image quality from 0 (worst) to 100 (best)\n\t            force_flash: false, // force flash mode,\n\t            flip_horiz: false, // flip image horiz (mirror mode)\n\t            fps: 30, // camera frames per second\n\t            upload_name: 'webcam', // name of file in upload post data\n\t            constraints: null // custom user media constraints\n\t        },\n\n\t        hooks: {}, // callback hook functions\n\n\t        init: function init() {\n\t            // initialize, check for getUserMedia support\n\t            var self = this;\n\n\t            // Setup getUserMedia, with polyfill for older browsers\n\t            // Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n\t            this.mediaDevices = navigator.mediaDevices && navigator.mediaDevices.getUserMedia ? navigator.mediaDevices : navigator.mozGetUserMedia || navigator.webkitGetUserMedia ? {\n\t                getUserMedia: function getUserMedia(c) {\n\t                    return new Promise(function (y, n) {\n\t                        (navigator.mozGetUserMedia || navigator.webkitGetUserMedia).call(navigator, c, y, n);\n\t                    });\n\t                }\n\t            } : null;\n\n\t            window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\t            this.userMedia = this.userMedia && !!this.mediaDevices && !!window.URL;\n\n\t            // Older versions of firefox (< 21) apparently claim support but user media does not actually work\n\t            if (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\n\t                if (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\n\t            }\n\n\t            // Make sure media stream is closed when navigating away from page\n\t            if (this.userMedia) {\n\t                window.addEventListener('beforeunload', function (event) {\n\t                    self.reset();\n\t                });\n\t            }\n\t        },\n\n\t        attach: function attach(elem) {\n\t            // create webcam preview and attach to DOM element\n\t            // pass in actual DOM reference, ID, or CSS selector\n\t            if (typeof elem == 'string') {\n\t                elem = document.getElementById(elem) || document.querySelector(elem);\n\t            }\n\t            if (!elem) {\n\t                return this.dispatch('error', \"Could not locate DOM element to attach to.\");\n\t            }\n\t            this.container = elem;\n\t            elem.innerHTML = ''; // start with empty element\n\n\t            // insert \"peg\" so we can insert our preview canvas adjacent to it later on\n\t            var peg = document.createElement('div');\n\t            elem.appendChild(peg);\n\t            this.peg = peg;\n\n\t            // set width/height if not already set\n\t            if (!this.params.width) this.params.width = elem.offsetWidth;\n\t            if (!this.params.height) this.params.height = elem.offsetHeight;\n\n\t            // set defaults for dest_width / dest_height if not set\n\t            if (!this.params.dest_width) this.params.dest_width = this.params.width;\n\t            if (!this.params.dest_height) this.params.dest_height = this.params.height;\n\n\t            // if force_flash is set, disable userMedia\n\t            if (this.params.force_flash) this.userMedia = null;\n\n\t            // check for default fps\n\t            if (typeof this.params.fps !== \"number\") this.params.fps = 30;\n\n\t            // adjust scale if dest_width or dest_height is different\n\t            var scaleX = this.params.width / this.params.dest_width;\n\t            var scaleY = this.params.height / this.params.dest_height;\n\n\t            if (this.userMedia) {\n\t                // setup webcam video container\n\t                var video = document.createElement('video');\n\t                video.setAttribute('autoplay', 'autoplay');\n\t                video.style.width = '' + this.params.dest_width + 'px';\n\t                video.style.height = '' + this.params.dest_height + 'px';\n\n\t                if (scaleX != 1.0 || scaleY != 1.0) {\n\t                    elem.style.overflow = 'hidden';\n\t                    video.style.webkitTransformOrigin = '0px 0px';\n\t                    video.style.mozTransformOrigin = '0px 0px';\n\t                    video.style.msTransformOrigin = '0px 0px';\n\t                    video.style.oTransformOrigin = '0px 0px';\n\t                    video.style.transformOrigin = '0px 0px';\n\t                    video.style.webkitTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                    video.style.mozTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                    video.style.msTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                    video.style.oTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                    video.style.transform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                }\n\n\t                // add video element to dom\n\t                elem.appendChild(video);\n\t                this.video = video;\n\n\t                // ask user for access to their camera\n\t                var self = this;\n\t                this.mediaDevices.getUserMedia({\n\t                    \"audio\": false,\n\t                    \"video\": this.params.constraints || {\n\t                        mandatory: {\n\t                            minWidth: this.params.dest_width,\n\t                            minHeight: this.params.dest_height\n\t                        }\n\t                    }\n\t                }).then(function (stream) {\n\t                    // got access, attach stream to video\n\t                    video.src = window.URL.createObjectURL(stream) || stream;\n\t                    self.stream = stream;\n\t                    self.loaded = true;\n\t                    self.live = true;\n\t                    self.dispatch('load');\n\t                    self.dispatch('live');\n\t                    self.flip();\n\t                }).catch(function (err) {\n\t                    return self.dispatch('error', \"Could not access webcam: \" + err.name + \": \" + err.message, err);\n\t                });\n\t            } else {\n\t                // flash fallback\n\t                window.Webcam = Webcam; // needed for flash-to-js interface\n\t                var div = document.createElement('div');\n\t                div.innerHTML = this.getSWFHTML();\n\t                elem.appendChild(div);\n\t            }\n\n\t            // setup final crop for live preview\n\t            if (this.params.crop_width && this.params.crop_height) {\n\t                var scaled_crop_width = Math.floor(this.params.crop_width * scaleX);\n\t                var scaled_crop_height = Math.floor(this.params.crop_height * scaleY);\n\n\t                elem.style.width = '' + scaled_crop_width + 'px';\n\t                elem.style.height = '' + scaled_crop_height + 'px';\n\t                elem.style.overflow = 'hidden';\n\n\t                elem.scrollLeft = Math.floor(this.params.width / 2 - scaled_crop_width / 2);\n\t                elem.scrollTop = Math.floor(this.params.height / 2 - scaled_crop_height / 2);\n\t            } else {\n\t                // no crop, set size to desired\n\t                elem.style.width = '' + this.params.width + 'px';\n\t                elem.style.height = '' + this.params.height + 'px';\n\t            }\n\t        },\n\n\t        reset: function reset() {\n\t            // shutdown camera, reset to potentially attach again\n\t            if (this.preview_active) this.unfreeze();\n\n\t            // attempt to fix issue #64\n\t            this.unflip();\n\n\t            if (this.userMedia) {\n\t                if (this.stream) {\n\t                    if (this.stream.getVideoTracks) {\n\t                        // get video track to call stop on it\n\t                        var tracks = this.stream.getVideoTracks();\n\t                        if (tracks && tracks[0] && tracks[0].stop) tracks[0].stop();\n\t                    } else if (this.stream.stop) {\n\t                        // deprecated, may be removed in future\n\t                        this.stream.stop();\n\t                    }\n\t                }\n\t                delete this.stream;\n\t                delete this.video;\n\t            }\n\n\t            if (this.container) {\n\t                this.container.innerHTML = '';\n\t                delete this.container;\n\t            }\n\n\t            this.loaded = false;\n\t            this.live = false;\n\t        },\n\n\t        set: function set() {\n\t            // set one or more params\n\t            // variable argument list: 1 param = hash, 2 params = key, value\n\t            if (arguments.length == 1) {\n\t                for (var key in arguments[0]) {\n\t                    this.params[key] = arguments[0][key];\n\t                }\n\t            } else {\n\t                this.params[arguments[0]] = arguments[1];\n\t            }\n\t        },\n\n\t        on: function on(name, callback) {\n\t            // set callback hook\n\t            name = name.replace(/^on/i, '').toLowerCase();\n\t            if (!this.hooks[name]) this.hooks[name] = [];\n\t            this.hooks[name].push(callback);\n\t        },\n\n\t        off: function off(name, callback) {\n\t            // remove callback hook\n\t            name = name.replace(/^on/i, '').toLowerCase();\n\t            if (this.hooks[name]) {\n\t                if (callback) {\n\t                    // remove one selected callback from list\n\t                    var idx = this.hooks[name].indexOf(callback);\n\t                    if (idx > -1) this.hooks[name].splice(idx, 1);\n\t                } else {\n\t                    // no callback specified, so clear all\n\t                    this.hooks[name] = [];\n\t                }\n\t            }\n\t        },\n\n\t        dispatch: function dispatch() {\n\t            // fire hook callback, passing optional value to it\n\t            var name = arguments[0].replace(/^on/i, '').toLowerCase();\n\t            var args = Array.prototype.slice.call(arguments, 1);\n\n\t            if (this.hooks[name] && this.hooks[name].length) {\n\t                for (var idx = 0, len = this.hooks[name].length; idx < len; idx++) {\n\t                    var hook = this.hooks[name][idx];\n\n\t                    if (typeof hook == 'function') {\n\t                        // callback is function reference, call directly\n\t                        hook.apply(this, args);\n\t                    } else if ((typeof hook === 'undefined' ? 'undefined' : _typeof(hook)) == 'object' && hook.length == 2) {\n\t                        // callback is PHP-style object instance method\n\t                        hook[0][hook[1]].apply(hook[0], args);\n\t                    } else if (window[hook]) {\n\t                        // callback is global function name\n\t                        window[hook].apply(window, args);\n\t                    }\n\t                } // loop\n\t                return true;\n\t            } else if (name == 'error') {\n\t                // default error handler if no custom one specified\n\t                alert(\"Webcam.js Error: \" + args[0]);\n\t            }\n\n\t            return false; // no hook defined\n\t        },\n\n\t        setSWFLocation: function setSWFLocation(url) {\n\t            // set location of SWF movie (defaults to webcam.swf in cwd)\n\t            this.swfURL = url;\n\t        },\n\n\t        detectFlash: function detectFlash() {\n\t            // return true if browser supports flash, false otherwise\n\t            // Code snippet borrowed from: https://github.com/swfobject/swfobject\n\t            var SHOCKWAVE_FLASH = \"Shockwave Flash\",\n\t                SHOCKWAVE_FLASH_AX = \"ShockwaveFlash.ShockwaveFlash\",\n\t                FLASH_MIME_TYPE = \"application/x-shockwave-flash\",\n\t                win = window,\n\t                nav = navigator,\n\t                hasFlash = false;\n\n\t            if (typeof nav.plugins !== \"undefined\" && _typeof(nav.plugins[SHOCKWAVE_FLASH]) === \"object\") {\n\t                var desc = nav.plugins[SHOCKWAVE_FLASH].description;\n\t                if (desc && typeof nav.mimeTypes !== \"undefined\" && nav.mimeTypes[FLASH_MIME_TYPE] && nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin) {\n\t                    hasFlash = true;\n\t                }\n\t            } else if (typeof win.ActiveXObject !== \"undefined\") {\n\t                try {\n\t                    var ax = new ActiveXObject(SHOCKWAVE_FLASH_AX);\n\t                    if (ax) {\n\t                        var ver = ax.GetVariable(\"$version\");\n\t                        if (ver) hasFlash = true;\n\t                    }\n\t                } catch (e) {\n\t                    ;\n\t                }\n\t            }\n\n\t            return hasFlash;\n\t        },\n\n\t        getSWFHTML: function getSWFHTML() {\n\t            // Return HTML for embedding flash based webcam capture movie\n\t            var html = '';\n\n\t            // make sure we aren't running locally (flash doesn't work)\n\t            if (location.protocol.match(/file/)) {\n\t                this.dispatch('error', \"Flash does not work from local disk.  Please run from a web server.\");\n\t                return '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\n\t            }\n\n\t            // make sure we have flash\n\t            if (!this.detectFlash()) {\n\t                this.dispatch('error', \"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\");\n\t                return '<h3 style=\"color:red\">ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).</h3>';\n\t            }\n\n\t            // set default swfURL if not explicitly set\n\t            if (!this.swfURL) {\n\t                // find our script tag, and use that base URL\n\t                var base_url = '';\n\t                var scpts = document.getElementsByTagName('script');\n\t                for (var idx = 0, len = scpts.length; idx < len; idx++) {\n\t                    var src = scpts[idx].getAttribute('src');\n\t                    if (src && src.match(/\\/webcam(\\.min)?\\.js/)) {\n\t                        base_url = src.replace(/\\/webcam(\\.min)?\\.js.*$/, '');\n\t                        idx = len;\n\t                    }\n\t                }\n\t                if (base_url) this.swfURL = base_url + '/webcam.swf';else this.swfURL = 'webcam.swf';\n\t            }\n\n\t            // if this is the user's first visit, set flashvar so flash privacy settings panel is shown first\n\t            if (window.localStorage && !localStorage.getItem('visited')) {\n\t                this.params.new_user = 1;\n\t                localStorage.setItem('visited', 1);\n\t            }\n\n\t            // construct flashvars string\n\t            var flashvars = '';\n\t            for (var key in this.params) {\n\t                if (flashvars) flashvars += '&';\n\t                flashvars += key + '=' + escape(this.params[key]);\n\t            }\n\n\t            // construct object/embed tag\n\t            html += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"' + this.protocol + '://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"' + this.swfURL + '\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"' + flashvars + '\"/><embed id=\"webcam_movie_embed\" src=\"' + this.swfURL + '\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"' + flashvars + '\"></embed></object>';\n\n\t            return html;\n\t        },\n\n\t        getMovie: function getMovie() {\n\t            // get reference to movie object/embed in DOM\n\t            if (!this.loaded) return this.dispatch('error', \"Flash Movie is not loaded yet\");\n\t            var movie = document.getElementById('webcam_movie_obj');\n\t            if (!movie || !movie._snap) movie = document.getElementById('webcam_movie_embed');\n\t            if (!movie) this.dispatch('error', \"Cannot locate Flash movie in DOM\");\n\t            return movie;\n\t        },\n\n\t        freeze: function freeze() {\n\t            // show preview, freeze camera\n\t            var self = this;\n\t            var params = this.params;\n\n\t            // kill preview if already active\n\t            if (this.preview_active) this.unfreeze();\n\n\t            // determine scale factor\n\t            var scaleX = this.params.width / this.params.dest_width;\n\t            var scaleY = this.params.height / this.params.dest_height;\n\n\t            // must unflip container as preview canvas will be pre-flipped\n\t            this.unflip();\n\n\t            // calc final size of image\n\t            var final_width = params.crop_width || params.dest_width;\n\t            var final_height = params.crop_height || params.dest_height;\n\n\t            // create canvas for holding preview\n\t            var preview_canvas = document.createElement('canvas');\n\t            preview_canvas.width = final_width;\n\t            preview_canvas.height = final_height;\n\t            var preview_context = preview_canvas.getContext('2d');\n\n\t            // save for later use\n\t            this.preview_canvas = preview_canvas;\n\t            this.preview_context = preview_context;\n\n\t            // scale for preview size\n\t            if (scaleX != 1.0 || scaleY != 1.0) {\n\t                preview_canvas.style.webkitTransformOrigin = '0px 0px';\n\t                preview_canvas.style.mozTransformOrigin = '0px 0px';\n\t                preview_canvas.style.msTransformOrigin = '0px 0px';\n\t                preview_canvas.style.oTransformOrigin = '0px 0px';\n\t                preview_canvas.style.transformOrigin = '0px 0px';\n\t                preview_canvas.style.webkitTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                preview_canvas.style.mozTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                preview_canvas.style.msTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                preview_canvas.style.oTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t                preview_canvas.style.transform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t            }\n\n\t            // take snapshot, but fire our own callback\n\t            this.snap(function () {\n\t                // add preview image to dom, adjust for crop\n\t                preview_canvas.style.position = 'relative';\n\t                preview_canvas.style.left = '' + self.container.scrollLeft + 'px';\n\t                preview_canvas.style.top = '' + self.container.scrollTop + 'px';\n\n\t                self.container.insertBefore(preview_canvas, self.peg);\n\t                self.container.style.overflow = 'hidden';\n\n\t                // set flag for user capture (use preview)\n\t                self.preview_active = true;\n\t            }, preview_canvas);\n\t        },\n\n\t        unfreeze: function unfreeze() {\n\t            // cancel preview and resume live video feed\n\t            if (this.preview_active) {\n\t                // remove preview canvas\n\t                this.container.removeChild(this.preview_canvas);\n\t                delete this.preview_context;\n\t                delete this.preview_canvas;\n\n\t                // unflag\n\t                this.preview_active = false;\n\n\t                // re-flip if we unflipped before\n\t                this.flip();\n\t            }\n\t        },\n\n\t        flip: function flip() {\n\t            // flip container horiz (mirror mode) if desired\n\t            if (this.params.flip_horiz) {\n\t                var sty = this.container.style;\n\t                sty.webkitTransform = 'scaleX(-1)';\n\t                sty.mozTransform = 'scaleX(-1)';\n\t                sty.msTransform = 'scaleX(-1)';\n\t                sty.oTransform = 'scaleX(-1)';\n\t                sty.transform = 'scaleX(-1)';\n\t                sty.filter = 'FlipH';\n\t                sty.msFilter = 'FlipH';\n\t            }\n\t        },\n\n\t        unflip: function unflip() {\n\t            // unflip container horiz (mirror mode) if desired\n\t            if (this.params.flip_horiz) {\n\t                var sty = this.container.style;\n\t                sty.webkitTransform = 'scaleX(1)';\n\t                sty.mozTransform = 'scaleX(1)';\n\t                sty.msTransform = 'scaleX(1)';\n\t                sty.oTransform = 'scaleX(1)';\n\t                sty.transform = 'scaleX(1)';\n\t                sty.filter = '';\n\t                sty.msFilter = '';\n\t            }\n\t        },\n\n\t        savePreview: function savePreview(user_callback, user_canvas) {\n\t            // save preview freeze and fire user callback\n\t            var params = this.params;\n\t            var canvas = this.preview_canvas;\n\t            var context = this.preview_context;\n\n\t            // render to user canvas if desired\n\t            if (user_canvas) {\n\t                var user_context = user_canvas.getContext('2d');\n\t                user_context.drawImage(canvas, 0, 0);\n\t            }\n\n\t            // fire user callback if desired\n\t            user_callback(user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100), canvas, context);\n\n\t            // remove preview\n\t            this.unfreeze();\n\t        },\n\n\t        snap: function snap(user_callback, user_canvas) {\n\t            // take snapshot and return image data uri\n\t            var self = this;\n\t            var params = this.params;\n\n\t            if (!this.loaded) return this.dispatch('error', \"Webcam is not loaded yet\");\n\t            // if (!this.live) return this.dispatch('error', \"Webcam is not live yet\");\n\t            if (!user_callback) return this.dispatch('error', \"Please provide a callback function or canvas to snap()\");\n\n\t            // if we have an active preview freeze, use that\n\t            if (this.preview_active) {\n\t                this.savePreview(user_callback, user_canvas);\n\t                return null;\n\t            }\n\n\t            // create offscreen canvas element to hold pixels\n\t            var canvas = document.createElement('canvas');\n\t            canvas.width = this.params.dest_width;\n\t            canvas.height = this.params.dest_height;\n\t            var context = canvas.getContext('2d');\n\n\t            // flip canvas horizontally if desired\n\t            if (this.params.flip_horiz) {\n\t                context.translate(params.dest_width, 0);\n\t                context.scale(-1, 1);\n\t            }\n\n\t            // create inline function, called after image load (flash) or immediately (native)\n\t            var func = function func() {\n\t                // render image if needed (flash)\n\t                if (this.src && this.width && this.height) {\n\t                    context.drawImage(this, 0, 0, params.dest_width, params.dest_height);\n\t                }\n\n\t                // crop if desired\n\t                if (params.crop_width && params.crop_height) {\n\t                    var crop_canvas = document.createElement('canvas');\n\t                    crop_canvas.width = params.crop_width;\n\t                    crop_canvas.height = params.crop_height;\n\t                    var crop_context = crop_canvas.getContext('2d');\n\n\t                    crop_context.drawImage(canvas, Math.floor(params.dest_width / 2 - params.crop_width / 2), Math.floor(params.dest_height / 2 - params.crop_height / 2), params.crop_width, params.crop_height, 0, 0, params.crop_width, params.crop_height);\n\n\t                    // swap canvases\n\t                    context = crop_context;\n\t                    canvas = crop_canvas;\n\t                }\n\n\t                // render to user canvas if desired\n\t                if (user_canvas) {\n\t                    var user_context = user_canvas.getContext('2d');\n\t                    user_context.drawImage(canvas, 0, 0);\n\t                }\n\n\t                // fire user callback if desired\n\t                user_callback(user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100), canvas, context);\n\t            };\n\n\t            // grab image frame from userMedia or flash movie\n\t            if (this.userMedia) {\n\t                // native implementation\n\t                context.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);\n\n\t                // fire callback right away\n\t                func();\n\t            } else {\n\t                // flash fallback\n\t                var raw_data = this.getMovie()._snap();\n\n\t                // render to image, fire callback when complete\n\t                var img = new Image();\n\t                img.onload = func;\n\t                img.src = 'data:image/' + this.params.image_format + ';base64,' + raw_data;\n\t            }\n\n\t            return null;\n\t        },\n\n\t        configure: function configure(panel) {\n\t            // open flash configuration panel -- specify tab name:\n\t            // \"camera\", \"privacy\", \"default\", \"localStorage\", \"microphone\", \"settingsManager\"\n\t            if (!panel) panel = \"camera\";\n\t            this.getMovie()._configure(panel);\n\t        },\n\n\t        flashNotify: function flashNotify(type, msg) {\n\t            // receive notification from flash about event\n\t            switch (type) {\n\t                case 'flashLoadComplete':\n\t                    // movie loaded successfully\n\t                    this.loaded = true;\n\t                    this.dispatch('load');\n\t                    break;\n\n\t                case 'cameraLive':\n\t                    // camera is live and ready to snap\n\t                    this.live = true;\n\t                    this.dispatch('live');\n\t                    this.flip();\n\t                    break;\n\n\t                case 'error':\n\t                    // Flash error\n\t                    this.dispatch('error', msg);\n\t                    break;\n\n\t                default:\n\t                    // catch-all event, just in case\n\t                    // console.log(\"webcam flash_notify: \" + type + \": \" + msg);\n\t                    break;\n\t            }\n\t        },\n\n\t        b64ToUint6: function b64ToUint6(nChr) {\n\t            // convert base64 encoded character to 6-bit integer\n\t            // from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n\t            return nChr > 64 && nChr < 91 ? nChr - 65 : nChr > 96 && nChr < 123 ? nChr - 71 : nChr > 47 && nChr < 58 ? nChr + 4 : nChr === 43 ? 62 : nChr === 47 ? 63 : 0;\n\t        },\n\n\t        base64DecToArr: function base64DecToArr(sBase64, nBlocksSize) {\n\t            // convert base64 encoded string to Uintarray\n\t            // from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n\t            var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"),\n\t                nInLen = sB64Enc.length,\n\t                nOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2,\n\t                taBytes = new Uint8Array(nOutLen);\n\n\t            for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n\t                nMod4 = nInIdx & 3;\n\t                nUint24 |= this.b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4;\n\t                if (nMod4 === 3 || nInLen - nInIdx === 1) {\n\t                    for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n\t                        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\n\t                    }\n\t                    nUint24 = 0;\n\t                }\n\t            }\n\t            return taBytes;\n\t        },\n\n\t        upload: function upload(image_data_uri, target_url, callback) {\n\t            // submit image data to server using binary AJAX\n\t            var form_elem_name = this.params.upload_name || 'webcam';\n\n\t            // detect image format from within image_data_uri\n\t            var image_fmt = '';\n\t            if (image_data_uri.match(/^data\\:image\\/(\\w+)/)) image_fmt = RegExp.$1;else throw \"Cannot locate image format in Data URI\";\n\n\t            // extract raw base64 data from Data URI\n\t            var raw_image_data = image_data_uri.replace(/^data\\:image\\/\\w+\\;base64\\,/, '');\n\n\t            // contruct use AJAX object\n\t            var http = new XMLHttpRequest();\n\t            http.open(\"POST\", target_url, true);\n\n\t            // setup progress events\n\t            if (http.upload && http.upload.addEventListener) {\n\t                http.upload.addEventListener('progress', function (e) {\n\t                    if (e.lengthComputable) {\n\t                        var progress = e.loaded / e.total;\n\t                        Webcam.dispatch('uploadProgress', progress, e);\n\t                    }\n\t                }, false);\n\t            }\n\n\t            // completion handler\n\t            var self = this;\n\t            http.onload = function () {\n\t                if (callback) callback.apply(self, [http.status, http.responseText, http.statusText]);\n\t                Webcam.dispatch('uploadComplete', http.status, http.responseText, http.statusText);\n\t            };\n\n\t            // create a blob and decode our base64 to binary\n\t            var blob = new Blob([this.base64DecToArr(raw_image_data)], { type: 'image/' + image_fmt });\n\n\t            // stuff into a form, so servers can easily receive it as a standard file upload\n\t            var form = new FormData();\n\t            form.append(form_elem_name, blob, form_elem_name + \".\" + image_fmt.replace(/e/, ''));\n\n\t            // send data to server\n\t            http.send(form);\n\t        }\n\n\t    };\n\n\t    Webcam.init();\n\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t            return Webcam;\n\t        }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object' && module.exports) {\n\t        module.exports = Webcam;\n\t    } else {\n\t        window.Webcam = Webcam;\n\t    }\n\t})(window);\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** widget-render-pusher.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ebb43203607556e893c5\n **/","/**\n * ------------------------------------------------------------------------\n * Widget RenderConf Pusher\n * ------------------------------------------------------------------------\n */\n'use strict';\n\nimport bucket from './scripts/bucket';\nimport Webcam from './scripts/webcam';\n\nconst pusher = new Pusher('087e104eb546157304a9', { cluster: 'eu' });\nconst button = pusher.subscribe('button');\n\nconst shutter = document.getElementById('shutter');\nconst sound = document.getElementById('sound');\nconst gallery = document.getElementById('gallery');\n\n// const test = document.getElementById('test');\n// test.addEventListener('click', function() {\n//     var data = {\n//         id: bucket.makeid()\n//     };\n//     take_snapshot(data);\n// }, false)\n\nfunction take_snapshot(data) {\n    console.log(data, 'Button data');\n    shutter.setAttribute('class', 'on');\n    sound.play();\n    setTimeout(function() {\n        shutter.setAttribute('class', '');\n    }, 30 * 2 + 45); /* Shutter speed (double & add 45) */\n    // take snapshot and get image data\n    Webcam.snap(function(data_uri) {\n        bucket.put(data.id, data_uri).then(() => {\n            refresh(data.id);\n        })\n    });\n\n}\n\nfunction refresh(id) {\n    console.log('list', id);\n    bucket.list(id).then(function(data) {\n        return Promise.all(\n            data.map(function(uri) {\n                return window.fetch(uri).then(function(response) {\n                    return response.text();\n                });\n            })\n        )\n    }).then(images => {\n        return images.map(uri => {\n            var i = document.createElement('img');\n            i.setAttribute('src', uri);\n            i.setAttribute('width', 320);\n            i.setAttribute('height', 240);\n            i.setAttribute('class', 'pic');\n            return i;\n        })\n    }).then(images => {\n        var first = gallery.childNodes[0];\n        var group = document.createElement('hr');\n        if (first) {\n            gallery.insertBefore(group, first);\n        } else {\n            gallery.appendChild(group);\n        }\n        images.forEach(i => {\n            console.log(gallery);\n            console.log(i);\n            console.log(group);\n            gallery.insertBefore(i, group);\n            // document.body.appendChild(i)\n        });\n\n    }).catch(err => {\n        console.log(err);\n    })\n}\n\n\nbutton.bind('press', function(data) {\n    take_snapshot(data);\n})\n\n\nWebcam.set({\n    width: 320,\n    height: 240,\n    image_format: 'jpeg',\n    jpeg_quality: 90\n});\nWebcam.attach('#my_camera');\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","'use strict';\n\nAWS.config.region = 'eu-west-1';\n\nvar s3 = new AWS.S3();\n\nfunction unauthenticatedRequest(operation, params, callback) {\n    var request = s3[operation](params);\n    request.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n    request.removeListener('sign', AWS.EventListeners.Core.SIGN);\n    return request.send(callback);\n}\n\nfunction makeid() {\n    var text = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (var i = 0; i < 5; i++)\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n}\n\nconst put = function(id, data) {\n    var params = {\n        Bucket: 'backbase-renderconf',\n        Key: id + '/' + makeid(),\n        ACL: 'public-read',\n        Body: data\n    };\n    return new Promise(function(resolve, reject) {\n      unauthenticatedRequest('putObject', params, function(err, data) {\n          if (err) reject(err);\n          else resolve(data); // successful response\n      });\n    });\n}\n\nconst list = function(id) {\n    var params = {\n        Bucket: 'backbase-renderconf',\n        Prefix: id + '/'\n    };\n\n    return new Promise(function(resolve, reject) {\n        unauthenticatedRequest('listObjects', params, function(err, data) {\n            if (err) {\n                reject(err);\n            }\n            var results = data.Contents.map(function(item) {\n                return 'https://s3-eu-west-1.amazonaws.com/backbase-renderconf/' + item.Key;\n            });\n            resolve(results);\n        });\n    });\n};\n\nmodule.exports = {\n    put: put,\n    list: list,\n    makeid: makeid\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/bucket.js\n **/","/* eslint-disable */\n// WebcamJS v1.0.6\n// Webcam library for capturing JPEG/PNG images in JavaScript\n// Attempts getUserMedia, falls back to Flash\n// Author: Joseph Huckaby: http://github.com/jhuckaby\n// Based on JPEGCam: http://code.google.com/p/jpegcam/\n// Copyright (c) 2012 - 2015 Joseph Huckaby\n// Licensed under the MIT License\n\n(function(window) {\n\nvar Webcam = {\n    version: '1.0.6',\n\n    // globals\n    protocol: location.protocol.match(/https/i) ? 'https' : 'http',\n    swfURL: '',      // URI to webcam.swf movie (defaults to the js location)\n    loaded: false,   // true when webcam movie finishes loading\n    live: false,     // true when webcam is initialized and ready to snap\n    userMedia: true, // true when getUserMedia is supported natively\n\n    params: {\n        width: 0,\n        height: 0,\n        dest_width: 0,         // size of captured image\n        dest_height: 0,        // these default to width/height\n        image_format: 'jpeg',  // image format (may be jpeg or png)\n        jpeg_quality: 90,      // jpeg image quality from 0 (worst) to 100 (best)\n        force_flash: false,    // force flash mode,\n        flip_horiz: false,     // flip image horiz (mirror mode)\n        fps: 30,               // camera frames per second\n        upload_name: 'webcam', // name of file in upload post data\n        constraints: null      // custom user media constraints\n    },\n\n    hooks: {}, // callback hook functions\n\n    init: function() {\n        // initialize, check for getUserMedia support\n        var self = this;\n\n        // Setup getUserMedia, with polyfill for older browsers\n        // Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n        this.mediaDevices = (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ?\n            navigator.mediaDevices : ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {\n                getUserMedia: function(c) {\n                    return new Promise(function(y, n) {\n                        (navigator.mozGetUserMedia ||\n                        navigator.webkitGetUserMedia).call(navigator, c, y, n);\n                    });\n                }\n        } : null);\n\n        window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n        this.userMedia = this.userMedia && !!this.mediaDevices && !!window.URL;\n\n        // Older versions of firefox (< 21) apparently claim support but user media does not actually work\n        if (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\n            if (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\n        }\n\n        // Make sure media stream is closed when navigating away from page\n        if (this.userMedia) {\n            window.addEventListener( 'beforeunload', function(event) {\n                self.reset();\n            } );\n        }\n    },\n\n    attach: function(elem) {\n        // create webcam preview and attach to DOM element\n        // pass in actual DOM reference, ID, or CSS selector\n        if (typeof(elem) == 'string') {\n            elem = document.getElementById(elem) || document.querySelector(elem);\n        }\n        if (!elem) {\n            return this.dispatch('error', \"Could not locate DOM element to attach to.\");\n        }\n        this.container = elem;\n        elem.innerHTML = ''; // start with empty element\n\n        // insert \"peg\" so we can insert our preview canvas adjacent to it later on\n        var peg = document.createElement('div');\n        elem.appendChild( peg );\n        this.peg = peg;\n\n        // set width/height if not already set\n        if (!this.params.width) this.params.width = elem.offsetWidth;\n        if (!this.params.height) this.params.height = elem.offsetHeight;\n\n        // set defaults for dest_width / dest_height if not set\n        if (!this.params.dest_width) this.params.dest_width = this.params.width;\n        if (!this.params.dest_height) this.params.dest_height = this.params.height;\n\n        // if force_flash is set, disable userMedia\n        if (this.params.force_flash) this.userMedia = null;\n\n        // check for default fps\n        if (typeof this.params.fps !== \"number\") this.params.fps = 30;\n\n        // adjust scale if dest_width or dest_height is different\n        var scaleX = this.params.width / this.params.dest_width;\n        var scaleY = this.params.height / this.params.dest_height;\n\n        if (this.userMedia) {\n            // setup webcam video container\n            var video = document.createElement('video');\n            video.setAttribute('autoplay', 'autoplay');\n            video.style.width = '' + this.params.dest_width + 'px';\n            video.style.height = '' + this.params.dest_height + 'px';\n\n            if ((scaleX != 1.0) || (scaleY != 1.0)) {\n                elem.style.overflow = 'hidden';\n                video.style.webkitTransformOrigin = '0px 0px';\n                video.style.mozTransformOrigin = '0px 0px';\n                video.style.msTransformOrigin = '0px 0px';\n                video.style.oTransformOrigin = '0px 0px';\n                video.style.transformOrigin = '0px 0px';\n                video.style.webkitTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n                video.style.mozTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n                video.style.msTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n                video.style.oTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n                video.style.transform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n            }\n\n            // add video element to dom\n            elem.appendChild( video );\n            this.video = video;\n\n            // ask user for access to their camera\n            var self = this;\n            this.mediaDevices.getUserMedia({\n                \"audio\": false,\n                \"video\": this.params.constraints || {\n                    mandatory: {\n                        minWidth: this.params.dest_width,\n                        minHeight: this.params.dest_height\n                    }\n                }\n            })\n            .then( function(stream) {\n                // got access, attach stream to video\n                video.src = window.URL.createObjectURL( stream ) || stream;\n                self.stream = stream;\n                self.loaded = true;\n                self.live = true;\n                self.dispatch('load');\n                self.dispatch('live');\n                self.flip();\n            })\n            .catch( function(err) {\n                return self.dispatch('error', \"Could not access webcam: \" + err.name + \": \" + err.message, err);\n            });\n        }\n        else {\n            // flash fallback\n            window.Webcam = Webcam; // needed for flash-to-js interface\n            var div = document.createElement('div');\n            div.innerHTML = this.getSWFHTML();\n            elem.appendChild( div );\n        }\n\n        // setup final crop for live preview\n        if (this.params.crop_width && this.params.crop_height) {\n            var scaled_crop_width = Math.floor( this.params.crop_width * scaleX );\n            var scaled_crop_height = Math.floor( this.params.crop_height * scaleY );\n\n            elem.style.width = '' + scaled_crop_width + 'px';\n            elem.style.height = '' + scaled_crop_height + 'px';\n            elem.style.overflow = 'hidden';\n\n            elem.scrollLeft = Math.floor( (this.params.width / 2) - (scaled_crop_width / 2) );\n            elem.scrollTop = Math.floor( (this.params.height / 2) - (scaled_crop_height / 2) );\n        }\n        else {\n            // no crop, set size to desired\n            elem.style.width = '' + this.params.width + 'px';\n            elem.style.height = '' + this.params.height + 'px';\n        }\n    },\n\n    reset: function() {\n        // shutdown camera, reset to potentially attach again\n        if (this.preview_active) this.unfreeze();\n\n        // attempt to fix issue #64\n        this.unflip();\n\n        if (this.userMedia) {\n            if (this.stream) {\n                if (this.stream.getVideoTracks) {\n                    // get video track to call stop on it\n                    var tracks = this.stream.getVideoTracks();\n                    if (tracks && tracks[0] && tracks[0].stop) tracks[0].stop();\n                }\n                else if (this.stream.stop) {\n                    // deprecated, may be removed in future\n                    this.stream.stop();\n                }\n            }\n            delete this.stream;\n            delete this.video;\n        }\n\n        if (this.container) {\n            this.container.innerHTML = '';\n            delete this.container;\n        }\n\n        this.loaded = false;\n        this.live = false;\n    },\n\n    set: function() {\n        // set one or more params\n        // variable argument list: 1 param = hash, 2 params = key, value\n        if (arguments.length == 1) {\n            for (var key in arguments[0]) {\n                this.params[key] = arguments[0][key];\n            }\n        }\n        else {\n            this.params[ arguments[0] ] = arguments[1];\n        }\n    },\n\n    on: function(name, callback) {\n        // set callback hook\n        name = name.replace(/^on/i, '').toLowerCase();\n        if (!this.hooks[name]) this.hooks[name] = [];\n        this.hooks[name].push( callback );\n    },\n\n    off: function(name, callback) {\n        // remove callback hook\n        name = name.replace(/^on/i, '').toLowerCase();\n        if (this.hooks[name]) {\n            if (callback) {\n                // remove one selected callback from list\n                var idx = this.hooks[name].indexOf(callback);\n                if (idx > -1) this.hooks[name].splice(idx, 1);\n            }\n            else {\n                // no callback specified, so clear all\n                this.hooks[name] = [];\n            }\n        }\n    },\n\n    dispatch: function() {\n        // fire hook callback, passing optional value to it\n        var name = arguments[0].replace(/^on/i, '').toLowerCase();\n        var args = Array.prototype.slice.call(arguments, 1);\n\n        if (this.hooks[name] && this.hooks[name].length) {\n            for (var idx = 0, len = this.hooks[name].length; idx < len; idx++) {\n                var hook = this.hooks[name][idx];\n\n                if (typeof(hook) == 'function') {\n                    // callback is function reference, call directly\n                    hook.apply(this, args);\n                }\n                else if ((typeof(hook) == 'object') && (hook.length == 2)) {\n                    // callback is PHP-style object instance method\n                    hook[0][hook[1]].apply(hook[0], args);\n                }\n                else if (window[hook]) {\n                    // callback is global function name\n                    window[ hook ].apply(window, args);\n                }\n            } // loop\n            return true;\n        }\n        else if (name == 'error') {\n            // default error handler if no custom one specified\n            alert(\"Webcam.js Error: \" + args[0]);\n        }\n\n        return false; // no hook defined\n    },\n\n    setSWFLocation: function(url) {\n        // set location of SWF movie (defaults to webcam.swf in cwd)\n        this.swfURL = url;\n    },\n\n    detectFlash: function() {\n        // return true if browser supports flash, false otherwise\n        // Code snippet borrowed from: https://github.com/swfobject/swfobject\n        var SHOCKWAVE_FLASH = \"Shockwave Flash\",\n            SHOCKWAVE_FLASH_AX = \"ShockwaveFlash.ShockwaveFlash\",\n            FLASH_MIME_TYPE = \"application/x-shockwave-flash\",\n            win = window,\n            nav = navigator,\n            hasFlash = false;\n\n        if (typeof nav.plugins !== \"undefined\" && typeof nav.plugins[SHOCKWAVE_FLASH] === \"object\") {\n            var desc = nav.plugins[SHOCKWAVE_FLASH].description;\n            if (desc && (typeof nav.mimeTypes !== \"undefined\" && nav.mimeTypes[FLASH_MIME_TYPE] && nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)) {\n                hasFlash = true;\n            }\n        }\n        else if (typeof win.ActiveXObject !== \"undefined\") {\n            try {\n                var ax = new ActiveXObject(SHOCKWAVE_FLASH_AX);\n                if (ax) {\n                    var ver = ax.GetVariable(\"$version\");\n                    if (ver) hasFlash = true;\n                }\n            }\n            catch (e) {;}\n        }\n\n        return hasFlash;\n    },\n\n    getSWFHTML: function() {\n        // Return HTML for embedding flash based webcam capture movie\n        var html = '';\n\n        // make sure we aren't running locally (flash doesn't work)\n        if (location.protocol.match(/file/)) {\n            this.dispatch('error', \"Flash does not work from local disk.  Please run from a web server.\");\n            return '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\n        }\n\n        // make sure we have flash\n        if (!this.detectFlash()) {\n            this.dispatch('error', \"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\");\n            return '<h3 style=\"color:red\">ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).</h3>';\n        }\n\n        // set default swfURL if not explicitly set\n        if (!this.swfURL) {\n            // find our script tag, and use that base URL\n            var base_url = '';\n            var scpts = document.getElementsByTagName('script');\n            for (var idx = 0, len = scpts.length; idx < len; idx++) {\n                var src = scpts[idx].getAttribute('src');\n                if (src && src.match(/\\/webcam(\\.min)?\\.js/)) {\n                    base_url = src.replace(/\\/webcam(\\.min)?\\.js.*$/, '');\n                    idx = len;\n                }\n            }\n            if (base_url) this.swfURL = base_url + '/webcam.swf';\n            else this.swfURL = 'webcam.swf';\n        }\n\n        // if this is the user's first visit, set flashvar so flash privacy settings panel is shown first\n        if (window.localStorage && !localStorage.getItem('visited')) {\n            this.params.new_user = 1;\n            localStorage.setItem('visited', 1);\n        }\n\n        // construct flashvars string\n        var flashvars = '';\n        for (var key in this.params) {\n            if (flashvars) flashvars += '&';\n            flashvars += key + '=' + escape(this.params[key]);\n        }\n\n        // construct object/embed tag\n        html += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"'+this.swfURL+'\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"'+flashvars+'\"/><embed id=\"webcam_movie_embed\" src=\"'+this.swfURL+'\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"'+flashvars+'\"></embed></object>';\n\n        return html;\n    },\n\n    getMovie: function() {\n        // get reference to movie object/embed in DOM\n        if (!this.loaded) return this.dispatch('error', \"Flash Movie is not loaded yet\");\n        var movie = document.getElementById('webcam_movie_obj');\n        if (!movie || !movie._snap) movie = document.getElementById('webcam_movie_embed');\n        if (!movie) this.dispatch('error', \"Cannot locate Flash movie in DOM\");\n        return movie;\n    },\n\n    freeze: function() {\n        // show preview, freeze camera\n        var self = this;\n        var params = this.params;\n\n        // kill preview if already active\n        if (this.preview_active) this.unfreeze();\n\n        // determine scale factor\n        var scaleX = this.params.width / this.params.dest_width;\n        var scaleY = this.params.height / this.params.dest_height;\n\n        // must unflip container as preview canvas will be pre-flipped\n        this.unflip();\n\n        // calc final size of image\n        var final_width = params.crop_width || params.dest_width;\n        var final_height = params.crop_height || params.dest_height;\n\n        // create canvas for holding preview\n        var preview_canvas = document.createElement('canvas');\n        preview_canvas.width = final_width;\n        preview_canvas.height = final_height;\n        var preview_context = preview_canvas.getContext('2d');\n\n        // save for later use\n        this.preview_canvas = preview_canvas;\n        this.preview_context = preview_context;\n\n        // scale for preview size\n        if ((scaleX != 1.0) || (scaleY != 1.0)) {\n            preview_canvas.style.webkitTransformOrigin = '0px 0px';\n            preview_canvas.style.mozTransformOrigin = '0px 0px';\n            preview_canvas.style.msTransformOrigin = '0px 0px';\n            preview_canvas.style.oTransformOrigin = '0px 0px';\n            preview_canvas.style.transformOrigin = '0px 0px';\n            preview_canvas.style.webkitTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n            preview_canvas.style.mozTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n            preview_canvas.style.msTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n            preview_canvas.style.oTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n            preview_canvas.style.transform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\n        }\n\n        // take snapshot, but fire our own callback\n        this.snap( function() {\n            // add preview image to dom, adjust for crop\n            preview_canvas.style.position = 'relative';\n            preview_canvas.style.left = '' + self.container.scrollLeft + 'px';\n            preview_canvas.style.top = '' + self.container.scrollTop + 'px';\n\n            self.container.insertBefore( preview_canvas, self.peg );\n            self.container.style.overflow = 'hidden';\n\n            // set flag for user capture (use preview)\n            self.preview_active = true;\n\n        }, preview_canvas );\n    },\n\n    unfreeze: function() {\n        // cancel preview and resume live video feed\n        if (this.preview_active) {\n            // remove preview canvas\n            this.container.removeChild( this.preview_canvas );\n            delete this.preview_context;\n            delete this.preview_canvas;\n\n            // unflag\n            this.preview_active = false;\n\n            // re-flip if we unflipped before\n            this.flip();\n        }\n    },\n\n    flip: function() {\n        // flip container horiz (mirror mode) if desired\n        if (this.params.flip_horiz) {\n            var sty = this.container.style;\n            sty.webkitTransform = 'scaleX(-1)';\n            sty.mozTransform = 'scaleX(-1)';\n            sty.msTransform = 'scaleX(-1)';\n            sty.oTransform = 'scaleX(-1)';\n            sty.transform = 'scaleX(-1)';\n            sty.filter = 'FlipH';\n            sty.msFilter = 'FlipH';\n        }\n    },\n\n    unflip: function() {\n        // unflip container horiz (mirror mode) if desired\n        if (this.params.flip_horiz) {\n            var sty = this.container.style;\n            sty.webkitTransform = 'scaleX(1)';\n            sty.mozTransform = 'scaleX(1)';\n            sty.msTransform = 'scaleX(1)';\n            sty.oTransform = 'scaleX(1)';\n            sty.transform = 'scaleX(1)';\n            sty.filter = '';\n            sty.msFilter = '';\n        }\n    },\n\n    savePreview: function(user_callback, user_canvas) {\n        // save preview freeze and fire user callback\n        var params = this.params;\n        var canvas = this.preview_canvas;\n        var context = this.preview_context;\n\n        // render to user canvas if desired\n        if (user_canvas) {\n            var user_context = user_canvas.getContext('2d');\n            user_context.drawImage( canvas, 0, 0 );\n        }\n\n        // fire user callback if desired\n        user_callback(\n            user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100 ),\n            canvas,\n            context\n        );\n\n        // remove preview\n        this.unfreeze();\n    },\n\n    snap: function(user_callback, user_canvas) {\n        // take snapshot and return image data uri\n        var self = this;\n        var params = this.params;\n\n        if (!this.loaded) return this.dispatch('error', \"Webcam is not loaded yet\");\n        // if (!this.live) return this.dispatch('error', \"Webcam is not live yet\");\n        if (!user_callback) return this.dispatch('error', \"Please provide a callback function or canvas to snap()\");\n\n        // if we have an active preview freeze, use that\n        if (this.preview_active) {\n            this.savePreview( user_callback, user_canvas );\n            return null;\n        }\n\n        // create offscreen canvas element to hold pixels\n        var canvas = document.createElement('canvas');\n        canvas.width = this.params.dest_width;\n        canvas.height = this.params.dest_height;\n        var context = canvas.getContext('2d');\n\n        // flip canvas horizontally if desired\n        if (this.params.flip_horiz) {\n            context.translate( params.dest_width, 0 );\n            context.scale( -1, 1 );\n        }\n\n        // create inline function, called after image load (flash) or immediately (native)\n        var func = function() {\n            // render image if needed (flash)\n            if (this.src && this.width && this.height) {\n                context.drawImage(this, 0, 0, params.dest_width, params.dest_height);\n            }\n\n            // crop if desired\n            if (params.crop_width && params.crop_height) {\n                var crop_canvas = document.createElement('canvas');\n                crop_canvas.width = params.crop_width;\n                crop_canvas.height = params.crop_height;\n                var crop_context = crop_canvas.getContext('2d');\n\n                crop_context.drawImage( canvas,\n                    Math.floor( (params.dest_width / 2) - (params.crop_width / 2) ),\n                    Math.floor( (params.dest_height / 2) - (params.crop_height / 2) ),\n                    params.crop_width,\n                    params.crop_height,\n                    0,\n                    0,\n                    params.crop_width,\n                    params.crop_height\n                );\n\n                // swap canvases\n                context = crop_context;\n                canvas = crop_canvas;\n            }\n\n            // render to user canvas if desired\n            if (user_canvas) {\n                var user_context = user_canvas.getContext('2d');\n                user_context.drawImage( canvas, 0, 0 );\n            }\n\n            // fire user callback if desired\n            user_callback(\n                user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100 ),\n                canvas,\n                context\n            );\n        };\n\n        // grab image frame from userMedia or flash movie\n        if (this.userMedia) {\n            // native implementation\n            context.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);\n\n            // fire callback right away\n            func();\n        }\n        else {\n            // flash fallback\n            var raw_data = this.getMovie()._snap();\n\n            // render to image, fire callback when complete\n            var img = new Image();\n            img.onload = func;\n            img.src = 'data:image/'+this.params.image_format+';base64,' + raw_data;\n        }\n\n        return null;\n    },\n\n    configure: function(panel) {\n        // open flash configuration panel -- specify tab name:\n        // \"camera\", \"privacy\", \"default\", \"localStorage\", \"microphone\", \"settingsManager\"\n        if (!panel) panel = \"camera\";\n        this.getMovie()._configure(panel);\n    },\n\n    flashNotify: function(type, msg) {\n        // receive notification from flash about event\n        switch (type) {\n            case 'flashLoadComplete':\n                // movie loaded successfully\n                this.loaded = true;\n                this.dispatch('load');\n                break;\n\n            case 'cameraLive':\n                // camera is live and ready to snap\n                this.live = true;\n                this.dispatch('live');\n                this.flip();\n                break;\n\n            case 'error':\n                // Flash error\n                this.dispatch('error', msg);\n                break;\n\n            default:\n                // catch-all event, just in case\n                // console.log(\"webcam flash_notify: \" + type + \": \" + msg);\n                break;\n        }\n    },\n\n    b64ToUint6: function(nChr) {\n        // convert base64 encoded character to 6-bit integer\n        // from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n        return nChr > 64 && nChr < 91 ? nChr - 65\n            : nChr > 96 && nChr < 123 ? nChr - 71\n            : nChr > 47 && nChr < 58 ? nChr + 4\n            : nChr === 43 ? 62 : nChr === 47 ? 63 : 0;\n    },\n\n    base64DecToArr: function(sBase64, nBlocksSize) {\n        // convert base64 encoded string to Uintarray\n        // from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n        var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"), nInLen = sB64Enc.length,\n            nOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2,\n            taBytes = new Uint8Array(nOutLen);\n\n        for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n            nMod4 = nInIdx & 3;\n            nUint24 |= this.b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4;\n            if (nMod4 === 3 || nInLen - nInIdx === 1) {\n                for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n                    taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\n                }\n                nUint24 = 0;\n            }\n        }\n        return taBytes;\n    },\n\n    upload: function(image_data_uri, target_url, callback) {\n        // submit image data to server using binary AJAX\n        var form_elem_name = this.params.upload_name || 'webcam';\n\n        // detect image format from within image_data_uri\n        var image_fmt = '';\n        if (image_data_uri.match(/^data\\:image\\/(\\w+)/))\n            image_fmt = RegExp.$1;\n        else\n            throw \"Cannot locate image format in Data URI\";\n\n        // extract raw base64 data from Data URI\n        var raw_image_data = image_data_uri.replace(/^data\\:image\\/\\w+\\;base64\\,/, '');\n\n        // contruct use AJAX object\n        var http = new XMLHttpRequest();\n        http.open(\"POST\", target_url, true);\n\n        // setup progress events\n        if (http.upload && http.upload.addEventListener) {\n            http.upload.addEventListener( 'progress', function(e) {\n                if (e.lengthComputable) {\n                    var progress = e.loaded / e.total;\n                    Webcam.dispatch('uploadProgress', progress, e);\n                }\n            }, false );\n        }\n\n        // completion handler\n        var self = this;\n        http.onload = function() {\n            if (callback) callback.apply( self, [http.status, http.responseText, http.statusText] );\n            Webcam.dispatch('uploadComplete', http.status, http.responseText, http.statusText);\n        };\n\n        // create a blob and decode our base64 to binary\n        var blob = new Blob( [ this.base64DecToArr(raw_image_data) ], {type: 'image/'+image_fmt} );\n\n        // stuff into a form, so servers can easily receive it as a standard file upload\n        var form = new FormData();\n        form.append( form_elem_name, blob, form_elem_name+\".\"+image_fmt.replace(/e/, '') );\n\n        // send data to server\n        http.send(form);\n    }\n\n};\n\nWebcam.init();\n\nif (typeof define === 'function' && define.amd) {\n    define( function() { return Webcam; } );\n}\nelse if (typeof module === 'object' && module.exports) {\n    module.exports = Webcam;\n}\nelse {\n    window.Webcam = Webcam;\n}\n\n}(window));\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/webcam.js\n **/"],"sourceRoot":""}